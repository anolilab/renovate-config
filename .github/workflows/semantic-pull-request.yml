# https://help.github.com/en/categories/automating-your-workflow-with-github-actions

name: "Semantic Pull Request"

on: # yamllint disable-line rule:truthy
    pull_request_target:
        types:
            - "opened"
            - "edited"
            - "synchronize"

permissions: {}

jobs:
    main:
        permissions:
            pull-requests: "read" # to analyze PRs (amannn/action-semantic-pull-request)
            statuses: "write" # to mark status of analyzed PR (amannn/action-semantic-pull-request)
        runs-on: "ubuntu-latest"
        name: "Semantic Pull Request"
        steps:
            - name: "Harden Runner"
              uses: "step-security/harden-runner@ec9f2d5744a09debf3a187a3f4f675c53b671911" # v2.13.0
              with:
                  egress-policy: "audit"

            - name: "Validate PR title"
              uses: "amannn/action-semantic-pull-request@fdd4d3ddf614fbcd8c29e4b106d3bbe0cb2c605d" # v6.0.1
              env:
                  GITHUB_TOKEN: "${{ secrets.GITHUB_TOKEN }}"
              with:
                  types: |
                      feat
                      fix
                      chore
                      refactor
                      docs
                      test
                      ci
                      build
                      infra
                      revert
